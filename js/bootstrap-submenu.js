"use strict";!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){function t(t){this.$element=e(t),this.$main=this.$element.closest(".dropdown, .btn-group"),this.$menu=this.$element.parent(),this.$drop=this.$menu.parent().parent(),this.$menus=this.$menu.siblings(".dropdown-submenu");var i=this.$menu.find("> .dropdown-menu > "+n);this.$submenus=i.filter(".dropdown-submenu"),this.$items=i.not(".dropdown-submenu"),this.init()}var n=":not(.disabled, .divider, .dropdown-header)";return t.prototype={init:function(){this.$element.on("click.bs.dropdown",this.click.bind(this)),this.$element.keydown(this.keydown.bind(this)),this.$menu.on("hide.bs.submenu",this.hide.bind(this)),this.$items.keydown(this.item_keydown.bind(this)),this.$menu.nextAll(n+":first:not(.dropdown-submenu)").children("a").keydown(this.next_keydown.bind(this))},click:function(e){e.stopPropagation(),this.toggle()},toggle:function(){this.$menu.hasClass("open")?this.close():(this.$menu.addClass("open"),this.$menus.trigger("hide.bs.submenu"))},hide:function(e){e.stopPropagation(),this.close()},close:function(){this.$menu.removeClass("open"),this.$submenus.trigger("hide.bs.submenu")},keydown:function(e){if(/^(32|38|40)$/.test(e.keyCode)&&e.preventDefault(),/^(13|32)$/.test(e.keyCode))this.toggle();else if(/^(27|38|40)$/.test(e.keyCode))if(e.stopPropagation(),27==e.keyCode)this.$menu.hasClass("open")?this.close():(this.$menus.trigger("hide.bs.submenu"),this.$drop.removeClass("open").children("a").focus());else{var t=this.$main.find("li:not(.disabled):visible > a"),n=t.index(e.target);if(38==e.keyCode&&0!==n)n--;else{if(40!=e.keyCode||n===t.length-1)return;n++}t.eq(n).focus()}},item_keydown:function(e){27==e.keyCode&&(e.stopPropagation(),this.close(),this.$element.focus())},next_keydown:function(e){if(38==e.keyCode){e.preventDefault(),e.stopPropagation();var t=this.$drop.find("li:not(.disabled):visible > a"),n=t.index(e.target);t.eq(n-1).focus()}}},e.fn.submenupicker=function(n){var i=this instanceof e?this:e(n);return i.each(function(){var n=e.data(this,"bs.submenu");n||(n=new t(this),e.data(this,"bs.submenu",n))})},e.fn.submenupicker});